(()=>{const e=d20.engine.selected();if(1===e.length&&e[0]._model.attributes.custom_portal)return e[0]._model.save({custom_portal:null,controlledby:"",locked:!1,lockMovement:!1}),void d20plus.ut.sendHackerChat("Portal data successfully erased");if(2!==e.length||e[0]._model.character||"image"!==e[0]._model.attributes.type||e[1]._model.character||"image"!==e[1]._model.attributes.type)d20plus.ut.sendHackerChat("Select two portals to connect them, or one portal to erase the connection data");else{d20.engine.unselect();for(let t=0;t<2;t++)d20.engine.canvas.sendToBack(e[t]),e[t]._model.save({controlledby:"all",custom_portal:e[t?0:1]._model.id,locked:!0,lockMovement:!0});d20.Campaign.activePage().debounced_recordZIndexes(),d20plus.ut.sendHackerChat("Portals successfully connected")}})();